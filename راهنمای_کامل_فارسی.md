# 📘 راهنمای کامل نرم‌افزار تحلیلگر حرارتی پیشرفته

## 🌟 معرفی

**نرم‌افزار تحلیلگر حرارتی پیشرفته** یک ابزار حرفه‌ای برای تحلیل تصاویر حرارتی (ترموگرافی) است که با استفاده از جدیدترین تکنولوژی‌های وب و هوش مصنوعی طراحی شده است.

### ✨ ویژگی‌های اصلی

- 🔥 **تحلیل تصاویر حرارتی**: پشتیبانی از فرمت‌های BMT, BMP, JPG, PNG, TIFF
- 📊 **نمایش دما در دو واحد**: سانتیگراد و فارنهایت به صورت همزمان
- 🎯 **ابزارهای اندازه‌گیری**: نقطه‌گذاری، رسم ناحیه، خط‌کشی
- 📈 **نمودارها و آمار**: هیستوگرام، نمودار دمایی، آمار کامل
- 💾 **مدیریت پروژه**: ذخیره و بازیابی پروژه‌ها با تمام اطلاعات
- 📄 **گزارش‌گیری**: تولید گزارش PDF و DOCX با قالب‌های حرفه‌ای
- 🌐 **دوزبانه**: پشتیبانی کامل از فارسی و انگلیسی
- 💻 **اپلیکیشن دسکتاپ**: اجرا بدون نیاز به اینترنت

---

## 📋 فهرست مطالب

1. [نصب و راه‌اندازی](#نصب-و-راه‌اندازی)
2. [شروع به کار](#شروع-به-کار)
3. [مدیریت پروژه](#مدیریت-پروژه)
4. [آپلود و تحلیل تصاویر](#آپلود-و-تحلیل-تصاویر)
5. [ابزارهای اندازه‌گیری](#ابزارهای-اندازه‌گیری)
6. [گزارش‌گیری](#گزارش‌گیری)
7. [تنظیمات پیشرفته](#تنظیمات-پیشرفته)
8. [سوالات متداول](#سوالات-متداول)
9. [راهنمای توسعه‌دهندگان](#راهنمای-توسعه‌دهندگان)

---

## 🚀 نصب و راه‌اندازی

### پیش‌نیازها

#### برای استفاده از نسخه دسکتاپ:
- سیستم عامل: Windows 10 یا بالاتر (64-bit)
- حداقل RAM: 4GB (8GB توصیه می‌شود)
- فضای دیسک: 500MB

#### برای توسعه:
- Node.js 18+ و npm
- Python 3.11+
- Git

### نصب نسخه دسکتاپ

1. **دانلود فایل نصب**:
   - از پوشه `dist_electron/` فایل `Thermal Analyzer Pro Setup.exe` را دانلود کنید

2. **اجرای فایل نصب**:
   ```
   - دوبار کلیک روی فایل Setup.exe
   - مراحل نصب را دنبال کنید
   - محل نصب را انتخاب کنید
   ```

3. **اجرای نرم‌افزار**:
   - از منوی Start برنامه را اجرا کنید
   - یا از Desktop Shortcut استفاده کنید

### نسخه قابل حمل (Portable)

اگر نمی‌خواهید نرم‌افزار را نصب کنید:

```
1. فایل ThermalAnalyzerPro-Portable.exe را دانلود کنید
2. در هر پوشه‌ای که دوست دارید قرار دهید
3. مستقیماً اجرا کنید (نیازی به نصب ندارد)
```

---

## 🎬 شروع به کار

### ایجاد اولین پروژه

1. **باز کردن نرم‌افزار**:
   - نرم‌افزار را اجرا کنید
   - صفحه اصلی با پنجره‌های مختلف نمایش داده می‌شود

2. **ایجاد پروژه جدید**:
   ```
   File → New Project (Ctrl+N)

   یا کلیک روی آیکون "پروژه جدید"
   ```

3. **پر کردن اطلاعات پروژه**:
   ```
   ┌─────────────────────────────────┐
   │ نام پروژه: بازرسی ساختمان     │
   │ اپراتور: نام شما               │
   │ شرکت: نام شرکت                 │
   │ یادداشت: توضیحات اضافی         │
   └─────────────────────────────────┘
   ```

4. **ذخیره پروژه**:
   - کلیک روی "ایجاد پروژه"
   - پروژه در سرور ذخیره می‌شود
   - دیالوگ بسته می‌شود و می‌توانید شروع کنید

### رابط کاربری

نرم‌افزار شامل پنجره‌های زیر است:

```
┌──────────────────────────────────────────┐
│           منوی بالا (Top Menu)           │
├────────────┬─────────────────────────────┤
│            │                             │
│   لیست    │                             │
│  تصاویر   │      نمایشگر حرارتی         │
│            │     (ThermalViewer)         │
│            │                             │
├────────────┼─────────────────────────────┤
│            │                             │
│  هیستوگرام │      تصویر واقعی           │
│            │    (RealImageViewer)        │
│            │                             │
├────────────┴─────────────────────────────┤
│         جدول داده‌ها (DataTable)        │
└──────────────────────────────────────────┘
```

---

## 📁 مدیریت پروژه

### ایجاد پروژه جدید

```javascript
// فلوچارت ایجاد پروژه:

کلیک "پروژه جدید"
    ↓
وارد کردن اطلاعات
    ↓
ارسال به سرور (API: POST /projects)
    ↓
دریافت ID از سرور
    ↓
ذخیره در State محلی
    ↓
آماده برای تحلیل ✓
```

**نکات مهم**:
- نام پروژه **الزامی** است
- ID پروژه توسط سرور تولید می‌شود (یکتا و منحصر به فرد)
- پروژه بلافاصله قابل استفاده است

### باز کردن پروژه موجود

```
File → Open Project (Ctrl+O)

1. لیست پروژه‌ها نمایش داده می‌شود
2. پروژه مورد نظر را انتخاب کنید
3. کلیک "باز کردن"
4. تمام تصاویر، نشانگرها و نواحی بارگذاری می‌شود
```

**اطلاعات نمایش داده شده**:
- نام پروژه
- اپراتور
- شرکت
- تاریخ ایجاد
- تعداد تصاویر، نشانگرها و نواحی

### ذخیره تغییرات

```
File → Save Project (Ctrl+S)

یا

کلیک روی آیکون "ذخیره"
```

**ذخیره خودکار**:
- پس از هر تغییر، پروژه به صورت خودکار ذخیره می‌شود
- نقطه زرد در کنار نام پروژه = تغییرات ذخیره نشده

### حذف پروژه

```
File → Open Project → انتخاب پروژه → آیکون سطل زباله

⚠️ هشدار: این عمل غیرقابل بازگشت است!
```

---

## 📤 آپلود و تحلیل تصاویر

### آپلود تصویر حرارتی

**روش 1: از منو**
```
File → Import Image (Ctrl+I)

→ انتخاب فایل(ها)
→ آپلود به سرور
→ استخراج داده‌های حرارتی
→ نمایش در پنجره
```

**روش 2: Drag & Drop**
```
تصویر را به داخل پنجره "نمایشگر حرارتی" بکشید

✓ پشتیبانی از چند فایل همزمان
```

**فرمت‌های پشتیبانی شده**:
- `.bmt` - فرمت اصلی دوربین‌های حرارتی
- `.bmp`, `.jpg`, `.jpeg`, `.png` - تصاویر معمولی
- `.tiff`, `.tif` - تصاویر با کیفیت بالا

### پردازش تصویر

**مراحل پردازش**:

```
1. آپلود فایل به سرور
   ↓
2. تشخیص فرمت (BMT یا تصویر معمولی)
   ↓
3. استخراج داده‌های حرارتی:
   - ماتریس دما (temperatureMatrix)
   - حداقل دما (minTemp)
   - حداکثر دما (maxTemp)
   - متادیتا (emissivity, ambientTemp, etc.)
   ↓
4. تولید تصاویر palette:
   - Iron (آهنی)
   - Rainbow (رنگین‌کمان)
   - Grayscale (خاکستری)
   - Medical (پزشکی)
   ↓
5. ذخیره در دیتابیس
   ↓
6. بازگشت URL ها به کلاینت
   ↓
7. نمایش در نرم‌افزار ✓
```

### انتخاب Palette رنگی

```
کلیک روی منوی "Palette" در پنجره ThermalViewer

گزینه‌ها:
┌──────────────────────────────────┐
│ ⚫ Iron (آهنی) - پیش‌فرض        │
│ 🌈 Rainbow (رنگین‌کمان)         │
│ ⚪ Grayscale (خاکستری)          │
│ 🟤 Sepia (قهوه‌ای)              │
│ 🏥 Medical (پزشکی)              │
│ 🔥 Cold-Hot (سرد-گرم)           │
└──────────────────────────────────┘
```

**توضیح Palette ها**:
- **Iron**: بهترین کنتراست برای تشخیص تفاوت‌های دمایی
- **Rainbow**: طیف کامل رنگی، مناسب برای تحلیل دقیق
- **Grayscale**: ساده و واضح
- **Medical**: بهینه برای تصاویر پزشکی
- **Cold-Hot**: نمایش آبی برای سرد و قرمز برای گرم

---

## 🎯 ابزارهای اندازه‌گیری

### نشانگر نقطه (Point Marker)

**کاربرد**: اندازه‌گیری دمای یک نقطه خاص

```
1. کلیک روی آیکون 📍 (Marker)
2. کلیک روی نقطه مورد نظر در تصویر
3. دما به صورت خودکار نمایش داده می‌شود
```

**اطلاعات نمایش داده شده**:
```
┌────────────────────────────┐
│ 📍 M1                      │
│ موقعیت: (245, 312)        │
│ دما: 45.3°C (113.5°F)     │
│ Emissivity: 0.95           │
└────────────────────────────┘
```

**ویرایش نشانگر**:
- کلیک راست روی نشانگر → Edit
- تغییر نام، emissivity، یادداشت
- حذف: کلیک راست → Delete

### ناحیه اندازه‌گیری (Region)

**انواع نواحی**:

**1. مستطیل (Rectangle)**:
```
1. کلیک روی آیکون ▭
2. کلیک و نگه دارید
3. مستطیل را بکشید
4. رها کنید
```

**2. دایره (Circle)**:
```
1. کلیک روی آیکون ○
2. کلیک روی مرکز
3. بکشید تا شعاع مناسب
4. رها کنید
```

**3. چندضلعی (Polygon)**:
```
1. کلیک روی آیکون ⬟
2. کلیک برای هر نقطه گوشه
3. دوبار کلیک برای اتمام
```

**4. خط (Line)**:
```
1. کلیک روی آیکون ―
2. کلیک نقطه شروع
3. کلیک نقطه پایان
```

**آمار ناحیه**:
```
┌────────────────────────────┐
│ 🔴 Region 1                │
│ میانگین: 48.5°C (119.3°F) │
│ حداقل: 42.1°C (107.8°F)   │
│ حداکثر: 55.2°C (131.4°F)  │
│ تعداد پیکسل: 1,245        │
└────────────────────────────┘
```

### ابزارهای دیگر

**Zoom (بزرگ‌نمایی)**:
```
- Zoom In: کلیک ➕ یا Ctrl + Mouse Wheel Up
- Zoom Out: کلیک ➖ یا Ctrl + Mouse Wheel Down
- Reset: کلیک 🔄
```

**Pan (جابجایی)**:
```
1. انتخاب ابزار Cursor (👆)
2. کلیک و نگه دارید
3. تصویر را بکشید
4. رها کنید
```

---

## 📊 نمایش داده‌ها

### هیستوگرام (Histogram)

**مشاهده هیستوگرام**:
```
Window → Histogram

یا کلیک روی پنجره "Histogram"
```

**اطلاعات نمایش داده شده**:
```
┌────────────────────────────┐
│ 📊 Histogram               │
│                            │
│ Mean: 45.2°C (113.4°F)    │
│ Std Dev: 5.3°C (9.5°F)    │
│ Min: 35.1°C (95.2°F)      │
│ Max: 58.7°C (137.7°F)     │
│                            │
│ [نمودار میله‌ای]          │
│                            │
│ [نوار رنگی Palette]       │
└────────────────────────────┘
```

### جدول داده‌ها (Data Table)

**مشاهده جدول**:
```
Window → Data Table
```

**ستون‌های جدول**:

**برای Markers**:
| نام | تصویر | موقعیت | دما | Emissivity | یادداشت |
|-----|-------|---------|-----|------------|---------|

**برای Regions**:
| نام | تصویر | موقعیت | دمای متوسط | دمای Min | دمای Max | یادداشت |
|-----|-------|---------|-------------|----------|----------|---------|

**عملیات در جدول**:
- ✏️ ویرایش: کلیک روی سلول
- 🗑️ حذف: کلیک آیکون سطل زباله
- 💾 ذخیره: خودکار پس از تغییر

### Export داده‌ها

**Export به CSV**:
```
Data Table → آیکون CSV

فایل شامل:
- تمام markers با موقعیت و دما
- تمام regions با آمار کامل
- قابل باز شدن در Excel
```

**Export به JSON**:
```
Data Table → آیکون JSON

فرمت استاندارد برای:
- پردازش بیشتر
- Import به نرم‌افزارهای دیگر
```

---

## 📄 گزارش‌گیری

### ایجاد گزارش

**روش 1: از منو**:
```
File → Generate Report

یا Ctrl+R
```

**روش 2: از پنجره Reports**:
```
Window → Reports → "Generate Report"
```

### تنظیمات گزارش

```
┌────────────────────────────────────┐
│ ⚙️ تنظیمات گزارش                  │
├────────────────────────────────────┤
│ 📋 عنوان گزارش:                   │
│ [بازرسی حرارتی ساختمان]           │
│                                    │
│ 🌐 زبان گزارش:                    │
│ ○ فارسی  ● انگلیسی                │
│                                    │
│ 📐 اندازه صفحه:                   │
│ ● A4  ○ Letter  ○ A3              │
│                                    │
│ 📏 جهت صفحه:                      │
│ ● عمودی  ○ افقی                   │
│                                    │
│ 🎨 قالب:                          │
│ ● حرفه‌ای  ○ ساده  ○ تفصیلی      │
│                                    │
│ 📊 محتوای گزارش:                  │
│ ☑ اطلاعات پروژه                   │
│ ☑ تصاویر حرارتی                   │
│ ☑ تصاویر واقعی                    │
│ ☑ جدول Markers                    │
│ ☑ جدول Regions                    │
│ ☑ هیستوگرام                       │
│ ☑ نمودارهای آماری                 │
│                                    │
│ [لغو]  [پیش‌نمایش]  [تولید گزارش] │
└────────────────────────────────────┘
```

### ساختار گزارش

گزارش نهایی شامل موارد زیر است:

```
┌────────────────────────────────────┐
│         📄 گزارش تحلیل حرارتی     │
├────────────────────────────────────┤
│                                    │
│ 1️⃣ جلد گزارش                      │
│    - عنوان پروژه                  │
│    - لوگو شرکت (اختیاری)          │
│    - تاریخ                         │
│    - اپراتور                       │
│                                    │
│ 2️⃣ خلاصه اجرایی                   │
│    - اطلاعات کلی پروژه            │
│    - نتایج کلیدی                  │
│                                    │
│ 3️⃣ پارامترهای اندازه‌گیری        │
│    - Emissivity                    │
│    - Ambient Temperature           │
│    - Reflected Temperature         │
│    - Humidity                      │
│    - Distance                      │
│                                    │
│ 4️⃣ تصاویر حرارتی                  │
│    برای هر تصویر:                 │
│    - تصویر حرارتی (با palette)    │
│    - تصویر واقعی (در صورت وجود)  │
│    - نشانگرها روی تصویر           │
│    - نواحی روی تصویر              │
│    - آمار (Min, Max, Avg)         │
│                                    │
│ 5️⃣ جداول اطلاعات                  │
│    - جدول Markers                 │
│    - جدول Regions                 │
│                                    │
│ 6️⃣ تحلیل‌ها و نمودارها            │
│    - هیستوگرام توزیع دما          │
│    - نمودار خطی (در صورت وجود)   │
│                                    │
│ 7️⃣ نتیجه‌گیری                     │
│    - خلاصه یافته‌ها                │
│    - توصیه‌ها                      │
│                                    │
│ 8️⃣ ضمیمه                           │
│    - متادیتای تکنیکال             │
│    - اطلاعات تجهیزات              │
│                                    │
└────────────────────────────────────┘
```

### فرمت‌های خروجی

**PDF (توصیه می‌شود)**:
```
✓ قابل چاپ با کیفیت بالا
✓ سازگار با همه دستگاه‌ها
✓ حجم کم
✓ غیرقابل ویرایش (امنیت بیشتر)
```

**DOCX**:
```
✓ قابل ویرایش در Microsoft Word
✓ امکان افزودن توضیحات بیشتر
✓ قابل تبدیل به فرمت‌های دیگر
```

### پیش‌نمایش گزارش

قبل از تولید نهایی:
```
کلیک "پیش‌نمایش"
↓
مشاهده گزارش در پنجره جدید
↓
اگر مناسب بود: "تأیید و تولید"
اگر نیاز به تغییر: "بازگشت و ویرایش"
```

---

## ⚙️ تنظیمات پیشرفته

### پارامترهای حرارتی

```
Window → Parameters

یا

پنجره "Parameters" در کنار صفحه
```

**پارامترهای قابل تنظیم**:

```
┌────────────────────────────────────┐
│ 🔬 پارامترهای اندازه‌گیری        │
├────────────────────────────────────┤
│                                    │
│ Emissivity (گسیلندگی):           │
│ [0.95] (0.1 - 1.0)                │
│ توضیح: ضریب گسیل حرارت سطح       │
│                                    │
│ Ambient Temperature (دمای محیط):  │
│ [20°C] (-40 - 120°C)              │
│ توضیح: دمای هوای اطراف            │
│                                    │
│ Reflected Temperature (دمای بازتاب):│
│ [20°C] (-40 - 120°C)              │
│ توضیح: دمای اجسام اطراف           │
│                                    │
│ Humidity (رطوبت):                 │
│ [50%] (0 - 100%)                  │
│ توضیح: رطوبت نسبی هوا             │
│                                    │
│ Distance (فاصله):                 │
│ [1.0 m] (0.1 - 100 m)             │
│ توضیح: فاصله دوربین تا هدف        │
│                                    │
│ [بازنشانی]  [اعمال]  [ذخیره]     │
└────────────────────────────────────┘
```

**جدول Emissivity برای مواد مختلف**:

| ماده | Emissivity |
|------|-----------|
| آلومینیوم صیقلی | 0.05 |
| آلومینیوم اکسید شده | 0.90 |
| آجر قرمز | 0.93 |
| بتن | 0.92 |
| آهن زنگ زده | 0.65 |
| چوب | 0.90 |
| پلاستیک | 0.95 |
| پوست انسان | 0.98 |
| شیشه | 0.92 |

### محدوده دمایی سفارشی

```
ThermalViewer → آیکون ⚙️ → Temperature Range

┌────────────────────────────────────┐
│ 🌡️ محدوده دمایی سفارشی            │
├────────────────────────────────────┤
│                                    │
│ حداقل دما:                         │
│ [____°C] یا [پیش‌فرض: Auto]       │
│                                    │
│ حداکثر دما:                        │
│ [____°C] یا [پیش‌فرض: Auto]       │
│                                    │
│ نکته: با تنظیم دستی می‌توانید     │
│ کنتراست را بهبود بخشید           │
│                                    │
│ [بازنشانی]  [اعمال]               │
└────────────────────────────────────┘
```

**مثال کاربردی**:
```
اگر دمای واقعی بین 40-50°C است
ولی تصویر شامل نقاط 20-60°C

محدوده سفارشی: 40-50°C
↓
کنتراست بیشتر در محدوده مورد نظر
```

### تنظیمات نمایش

```
Settings → Display

┌────────────────────────────────────┐
│ 🖥️ تنظیمات نمایش                  │
├────────────────────────────────────┤
│                                    │
│ ☑ نمایش Grid (شبکه)               │
│ ☑ نمایش Markers                   │
│ ☑ نمایش Regions                   │
│ ☑ نمایش مقیاس دما                 │
│ ☑ نمایش مختصات موس                │
│                                    │
│ اندازه فونت:                       │
│ ○ کوچک  ● متوسط  ○ بزرگ          │
│                                    │
│ تم:                                │
│ ● تاریک  ○ روشن                   │
│                                    │
│ [ذخیره تغییرات]                   │
└────────────────────────────────────┘
```

---

## 🔧 تنظیمات پیشرفته برای کاربران حرفه‌ای

### API و اتصال به سرور

**تنظیم آدرس سرور**:

فایل: `.env.local`
```env
NEXT_PUBLIC_API_URL=http://localhost:8080/api/v1
```

**تست اتصال**:
```bash
curl http://localhost:8080/api/v1/health
```

**خروجی موفق**:
```json
{
  "status": "healthy",
  "timestamp": "2025-01-14T10:00:00Z"
}
```

### ذخیره‌سازی Local vs Server

**Local Storage**:
- سریع‌تر
- بدون نیاز به اینترنت
- محدودیت حجم (حدود 10MB)

**Server Storage**:
- ذخیره دائمی
- قابل دسترسی از هر دستگاه
- بدون محدودیت حجم
- امکان همکاری تیمی

**انتخاب روش**:
```javascript
// در کد تنظیم شده است:
// Default: هر دو (Hybrid)
localStorage + Server API
```

### Keyboard Shortcuts

| کلید | عملکرد |
|------|--------|
| `Ctrl+N` | پروژه جدید |
| `Ctrl+O` | باز کردن پروژه |
| `Ctrl+S` | ذخیره پروژه |
| `Ctrl+I` | آپلود تصویر |
| `Ctrl+R` | تولید گزارش |
| `Ctrl+Z` | Undo |
| `Ctrl+Y` | Redo |
| `Del` | حذف انتخاب شده |
| `Esc` | لغو ابزار فعال |
| `Space` | Pan Mode |
| `+` | Zoom In |
| `-` | Zoom Out |
| `0` | Reset Zoom |

---

## ❓ سوالات متداول (FAQ)

### سوالات عمومی

**Q: نرم‌افزار رایگان است؟**
A: بله، نسخه فعلی کاملاً رایگان است.

**Q: آیا به اینترنت نیاز دارد؟**
A: نسخه دسکتاپ بدون اینترنت کار می‌کند. فقط برای ذخیره در سرور نیاز است.

**Q: چند زبانه است؟**
A: فارسی و انگلیسی به صورت کامل پشتیبانی می‌شود.

**Q: حجم فایل نصبی چقدر است؟**
A: حدود 200-300 مگابایت.

### سوالات فنی

**Q: چرا دماها اشتباه نمایش داده می‌شود؟**
A: احتمالاً Emissivity اشتباه تنظیم شده. به جدول Emissivity مراجعه کنید.

**Q: چگونه دقت اندازه‌گیری را افزایش دهم؟**
A:
1. Emissivity صحیح را تنظیم کنید
2. فاصله مناسب را وارد کنید
3. پارامترهای محیطی (دما، رطوبت) را به درستی تنظیم کنید

**Q: چرا تصویر کند لود می‌شود؟**
A:
- حجم فایل بزرگ است
- اتصال شبکه کند است
- RAM سیستم کم است

**راه حل**: از فرمت‌های فشرده استفاده کنید یا حجم تصویر را کاهش دهید.

**Q: چگونه پروژه را Backup بگیرم؟**
A: از منوی File → Export Project استفاده کنید. فایل JSON حاوی تمام اطلاعات است.

---

## 👨‍💻 راهنمای توسعه‌دهندگان

### ساختار پروژه

```
termo/
├── client/                    # Frontend (Next.js + React)
│   ├── app/                  # صفحات اصلی
│   ├── components/           # کامپوننت‌های UI
│   │   ├── dialogs/         # دیالوگ‌ها
│   │   ├── layout/          # Layout کامپوننت‌ها
│   │   ├── ui/              # کامپوننت‌های پایه
│   │   └── windows/         # پنجره‌های اصلی
│   ├── lib/                 # Utilities و Services
│   │   ├── api-service.ts   # ارتباط با API
│   │   ├── store.ts         # State Management (Zustand)
│   │   ├── thermal-utils.ts # ابزارهای حرارتی
│   │   └── translations.ts  # ترجمه‌ها
│   ├── public/              # فایل‌های استاتیک
│   └── styles/              # استایل‌ها
│
├── server/                   # Backend (FastAPI + Python)
│   ├── app/
│   │   ├── api/             # API Endpoints
│   │   │   ├── routes/      # Routes مختلف
│   │   │   └── v1/          # API نسخه 1
│   │   ├── core/            # تنظیمات اصلی
│   │   ├── models/          # مدل‌های دیتابیس
│   │   ├── schemas/         # Pydantic Schemas
│   │   └── services/        # Business Logic
│   ├── uploads/             # فایل‌های آپلود شده
│   └── main.py              # Entry Point
│
└── docs/                     # مستندات
```

### نصب محیط توسعه

**1. Clone کردن Repository**:
```bash
git clone <repository-url>
cd termo
```

**2. نصب Frontend**:
```bash
cd client
npm install
npm run dev
```

**3. نصب Backend**:
```bash
cd server
python -m venv venv
venv\Scripts\activate  # Windows
pip install -r requirements.txt
uvicorn main:app --reload --port 8080
```

**4. تنظیم Environment Variables**:

`.env.local` (client):
```env
NEXT_PUBLIC_API_URL=http://localhost:8080/api/v1
```

`.env` (server):
```env
DATABASE_URL=sqlite:///./thermal_analyzer.db
UPLOAD_DIR=./uploads
```

### ساخت Build تولیدی

**Build کامل (Frontend + Backend + Electron)**:
```bash
cd client
npm run dist
```

**خروجی**:
```
client/dist_electron/
├── Thermal Analyzer Pro Setup.exe    # نصب کننده
├── ThermalAnalyzerPro-Portable.exe   # قابل حمل
└── win-unpacked/                      # فایل‌های unpacked
```

### API Endpoints

**پروژه‌ها**:
```http
POST   /api/v1/projects          # ایجاد پروژه
GET    /api/v1/projects          # لیست پروژه‌ها
GET    /api/v1/projects/{id}     # جزئیات پروژه
PUT    /api/v1/projects/{id}     # ویرایش پروژه
DELETE /api/v1/projects/{id}     # حذف پروژه
```

**تصاویر**:
```http
POST   /api/v1/thermal/upload    # آپلود تصویر
GET    /api/v1/images/{id}       # دریافت تصویر
DELETE /api/v1/images/{id}       # حذف تصویر
```

**گزارش**:
```http
POST   /api/v1/reports/generate  # تولید گزارش
```

### State Management

**Zustand Store**:
```typescript
interface AppState {
  // پروژه فعال
  currentProject: Project | null;

  // تصاویر
  images: ThermalImage[];
  activeImageId: string | null;

  // ابزارهای اندازه‌گیری
  markers: Marker[];
  regions: Region[];

  // UI State
  activeTool: string;
  currentPalette: string;

  // Actions
  setCurrentProject: (project: Project) => void;
  addImage: (image: ThermalImage) => void;
  addMarker: (marker: Marker) => void;
  // ...
}
```

### Component Structure

**مثال: ThermalViewer**
```tsx
// components/windows/ThermalViewer.tsx

export default function ThermalViewer() {
  // State hooks
  const { images, activeImageId, currentPalette } = useAppStore();

  // Local state
  const [mousePos, setMousePos] = useState({ x: 0, y: 0 });

  // Refs
  const canvasRef = useRef<HTMLCanvasElement>(null);

  // Effects
  useEffect(() => {
    // Render thermal image
    renderThermalCanvas(...);
  }, [activeImage, currentPalette]);

  // Event handlers
  const handleMouseMove = (e) => { ... };
  const handleClick = (e) => { ... };

  return (
    <Window title="Thermal Viewer">
      <canvas ref={canvasRef} ... />
    </Window>
  );
}
```

### توابع کاربردی

**استخراج دمای یک نقطه**:
```typescript
function getTemperatureAtPixel(
  x: number,
  y: number,
  thermalData: ThermalData
): number {
  const { width, height, temperatureMatrix } = thermalData;

  // محدودسازی
  x = Math.max(0, Math.min(x, width - 1));
  y = Math.max(0, Math.min(y, height - 1));

  // دریافت دما
  return temperatureMatrix[Math.floor(y)][Math.floor(x)];
}
```

**تبدیل سانتیگراد به فارنهایت**:
```typescript
function celsiusToFahrenheit(celsius: number): number {
  return (celsius * 9/5) + 32;
}

function formatTemperatureDual(celsius: number): string {
  const fahrenheit = celsiusToFahrenheit(celsius);
  return `${celsius.toFixed(1)}°C (${fahrenheit.toFixed(1)}°F)`;
}
```

**رندر Palette**:
```typescript
function renderThermalCanvas(
  canvas: HTMLCanvasElement,
  thermalData: ThermalData,
  palette: ColorPalette,
  minTemp?: number,
  maxTemp?: number
) {
  const ctx = canvas.getContext('2d');
  const { width, height, temperatureMatrix } = thermalData;

  // تنظیم اندازه canvas
  canvas.width = width;
  canvas.height = height;

  // رسم پیکسل‌ها
  const imageData = ctx.createImageData(width, height);

  for (let y = 0; y < height; y++) {
    for (let x = 0; x < width; x++) {
      const temp = temperatureMatrix[y][x];

      // نرمال‌سازی دما
      const normalized = (temp - minTemp) / (maxTemp - minTemp);

      // دریافت رنگ از palette
      const color = interpolateColor(palette, normalized);

      // تنظیم پیکسل
      const index = (y * width + x) * 4;
      imageData.data[index] = color.r;
      imageData.data[index + 1] = color.g;
      imageData.data[index + 2] = color.b;
      imageData.data[index + 3] = 255;
    }
  }

  ctx.putImageData(imageData, 0, 0);
}
```

---

## 🆘 پشتیبانی و ارتباط

### گزارش مشکل (Bug Report)

اگر مشکلی پیدا کردید:

1. بررسی کنید که مشکل قبلاً گزارش نشده باشد
2. اطلاعات زیر را جمع‌آوری کنید:
   - نسخه نرم‌افزار
   - سیستم عامل
   - مراحل تکرار مشکل
   - Screenshot (در صورت امکان)
3. Issue جدید ایجاد کنید در GitHub

### درخواست ویژگی جدید (Feature Request)

برای پیشنهاد ویژگی جدید:

1. شرح کامل ویژگی
2. Use Case (مثال استفاده)
3. اولویت (Critical, High, Medium, Low)

### مشارکت در پروژه

خوشحال می‌شویم مشارکت شما را داشته باشیم!

**مراحل**:
```
1. Fork کردن Repository
2. ایجاد Branch جدید (git checkout -b feature/amazing-feature)
3. Commit تغییرات (git commit -m 'Add amazing feature')
4. Push به Branch (git push origin feature/amazing-feature)
5. ایجاد Pull Request
```

**راهنمای Code Style**:
- TypeScript برای Frontend
- Python (PEP 8) برای Backend
- Comments به فارسی یا انگلیسی
- Test برای توابع کلیدی

---

## 📜 مجوز (License)

این نرم‌افزار تحت مجوز MIT منتشر شده است.

```
MIT License

Copyright (c) 2025 Thermal Analyzer Team

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files...
```

---

## 🙏 تشکر و قدردانی

از تمام افرادی که در توسعه این نرم‌افزار مشارکت داشته‌اند:

- تیم توسعه Frontend
- تیم توسعه Backend
- طراحان UI/UX
- تست‌کنندگان
- کاربران عزیز و پیشنهادات ارزشمندشان

---

## 📚 منابع مفید

**آموزش ترموگرافی**:
- [راهنمای جامع ترموگرافی](https://example.com)
- [استانداردهای IEC 62446-3](https://example.com)

**مستندات تکنیکال**:
- [API Documentation](https://example.com/api-docs)
- [Developer Guide](https://example.com/dev-guide)

**ویدیوهای آموزشی**:
- [نصب و راه‌اندازی](https://example.com/video1)
- [تحلیل تصاویر حرارتی](https://example.com/video2)
- [تولید گزارش حرفه‌ای](https://example.com/video3)

---

## 📝 Changelog

### نسخه 1.0.0 (2025-01-14)

**ویژگی‌های جدید**:
- ✨ نمایش دما در دو واحد (°C و °F)
- ✨ ایجاد پروژه با ارتباط سرور
- ✨ آپلود فایل از منوی بالا
- ✨ راهنمای کامل فارسی

**بهبودها**:
- ⚡ سرعت بارگذاری تصاویر
- 🎨 بهبود UI/UX
- 🐛 رفع باگ‌های گزارش‌گیری

**تغییرات Breaking**:
- 🔧 تغییر ساختار API
- 🔧 تغییر فرمت ذخیره‌سازی پروژه

---

## 🔮 نقشه راه (Roadmap)

### نسخه 1.1.0 (Q2 2025)
- [ ] پشتیبانی از فرمت‌های بیشتر
- [ ] Machine Learning برای تشخیص خودکار
- [ ] Real-time collaboration
- [ ] Mobile App (Android/iOS)

### نسخه 2.0.0 (Q4 2025)
- [ ] Cloud Storage
- [ ] Advanced Analytics
- [ ] AI-powered anomaly detection
- [ ] Multi-camera support

---

## 📞 اطلاعات تماس

**وب‌سایت**: https://thermal-analyzer.com
**ایمیل**: support@thermal-analyzer.com
**تلگرام**: @ThermalAnalyzerSupport

---

*آخرین به‌روزرسانی: 14 ژانویه 2025*

*ساخته شده با ❤️ در ایران*
